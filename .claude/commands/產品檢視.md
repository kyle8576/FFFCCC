# /產品檢視 - 自動化專案檢視模式

## 用途
此指令用於自動化排程的自我增強迭代。當所有開發任務完成後，自動呼叫此指令檢視專案狀態並決定下一步。

## 執行步驟

請按照以下步驟執行專案檢視分析：

### 1. 讀取必要文件
- 讀取 `.claude/skills/product_manager/SKILL.md` 採用產品經理角色
- 讀取 `dev/PRODUCT_SPEC.md` 了解產品規格（若不存在則讀取 `dev/PRODUCT_SPEC_FOR_AI_template.md`）
- 讀取 `dev/pipeline/PROGRESS.md` 了解目前進度
- 列出 `dev/pipeline/completed/` 目錄了解已完成任務

### 2. 專案差距分析
根據讀取的資訊進行分析：
1. **功能覆蓋率**：比對 PRODUCT_SPEC 中的功能需求與已完成任務
2. **核心功能檢查**：確認 P0/P1 核心功能是否都已實現
3. **測試覆蓋**：檢查是否有足夠的測試任務
4. **品質檢查**：是否需要 QA 驗證或優化任務

### 3. 決策輸出
**重要限制**：
- 必須緊貼 PRODUCT_SPEC，不可天馬行空新增功能
- 只新增 PRODUCT_SPEC 中明確定義但尚未實現的功能
- 專案完成標準：PRODUCT_SPEC 中所有核心功能 (P0/P1) 已實現

根據分析結果，做出以下決策之一：

#### 決策 A：需要繼續開發
如果 PRODUCT_SPEC 中有尚未實現的核心功能：
1. 在 `dev/pipeline/tasks/` 建立新任務
2. 更新 `dev/pipeline/PROGRESS.md`
3. 寫入狀態文件：

```json
// dev/pipeline/SELF_ENHANCEMENT_STATUS.json
{
  "status": "continue",
  "decision": "新增開發任務",
  "reason": "PRODUCT_SPEC 中尚有未完成的核心功能：[列出功能]",
  "new_tasks": ["TASK_XXX", "TASK_YYY"],
  "timestamp": "ISO 時間格式"
}
```

#### 決策 B：需要測試/QA
如果核心功能已實現但缺乏測試：
1. 在 `dev/pipeline/tasks/` 建立 QA 測試任務
2. 更新 `dev/pipeline/PROGRESS.md`
3. 寫入狀態文件：

```json
{
  "status": "continue",
  "decision": "新增測試任務",
  "reason": "核心功能已完成，需要進行品質驗證",
  "new_tasks": ["TASK_XXX_QA"],
  "timestamp": "ISO 時間格式"
}
```

#### 決策 C：專案已完成
如果 PRODUCT_SPEC 中所有核心功能已實現且有基本測試：
1. 寫入狀態文件：

```json
{
  "status": "complete",
  "decision": "專案已完成",
  "reason": "PRODUCT_SPEC 中所有核心功能 (P0/P1) 已實現，專案達到可交付狀態",
  "summary": {
    "total_completed": 數字,
    "core_features": ["已完成的核心功能列表"]
  },
  "timestamp": "ISO 時間格式"
}
```

#### 決策 D：專案已完成但有優化建議
如果 PRODUCT_SPEC 核心功能已完成，但 AI 判斷有優化空間或可延伸的功能（不在 PRODUCT_SPEC 範圍內）：
1. **不自動建立任務**（因為超出 PRODUCT_SPEC 範圍）
2. 寫入狀態文件，記錄建議供用戶參考：

```json
{
  "status": "complete_with_suggestions",
  "decision": "專案已完成，有優化建議",
  "reason": "PRODUCT_SPEC 核心功能已實現，以下為額外優化建議",
  "summary": {
    "total_completed": 數字,
    "core_features": ["已完成的核心功能列表"]
  },
  "suggestions": [
    {
      "type": "optimization/feature/enhancement",
      "title": "建議名稱",
      "description": "詳細說明",
      "priority": "P2/P3",
      "effort": "low/medium/high"
    }
  ],
  "next_action": "建議用戶評估後，可手動執行 /產品 新增需求",
  "timestamp": "ISO 時間格式"
}
```

> **注意**：此決策仍視為「完成」，排程將結束。建議內容僅供用戶參考，不會自動執行。

### 4. 輸出格式
執行完成後，輸出簡短摘要：

```
========================================
專案檢視分析完成
========================================
決策：[continue/complete/complete_with_suggestions]
原因：[簡短說明]
新增任務：[如有]
優化建議：[如有，列出建議數量]
========================================
```

## 注意事項
- 此指令專為自動化排程設計
- 不需要與用戶互動，直接進行分析和決策
- 嚴格遵循 PRODUCT_SPEC，不可自行發想新功能
- 狀態文件 `SELF_ENHANCEMENT_STATUS.json` 是排程腳本的關鍵依據
